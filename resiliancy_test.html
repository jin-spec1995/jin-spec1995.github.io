<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>JSB Resiliency Test</title>
  <link rel="icon" type="image/svg+xml" href="jsb_icon.svg" />
  <meta name="theme-color" content="#0d3b2e" />
  <style>
    :root{
      --brand-dark:#0d3b2e;   /* JSB dark green */
      --brand-mid:#0e6f57;    /* deep green */
      --brand-light:#22c28a;  /* accent green */
      --ink:#0b0b0b;
      --paper:#ffffff;
      --muted:#5e6b74;
      --line:#e6eaee;
      --chip:#f5f8f7;
      --glow: rgba(34,194,138,.20);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--ink); background:var(--paper);
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }

    /* Header & layout */
    .wrap{max-width:1120px; margin:20px auto 48px; padding:0 20px; padding-top:92px; padding-bottom:80px;}
    header.brand{
      position:fixed; inset:0 0 auto 0; background:#fff; z-index:1000;
      padding:14px 20px; display:flex; align-items:center; justify-content:space-between;
      border-bottom:1px solid var(--line);
      box-shadow:0 8px 32px rgba(13,59,46,.06);
      backdrop-filter: saturate(140%) blur(2px);
    }
    .brand-left{display:flex; align-items:center; gap:12px}
    .brand-logo{height:44px; width:auto}
    .brand-title{font-weight:800; letter-spacing:.2px; color:var(--brand-mid); font-size:20px}
    .subtle{color:var(--muted); font-size:14px}

    /* Cards & tags */
    .card{background:#fff; border:1px solid var(--line); border-radius:18px; padding:20px;
          box-shadow:0 10px 30px rgba(13,59,46,.05)}
    .card-title{display:flex; align-items:center; justify-content:space-between; gap:10px; font-weight:700; margin:2px 0 14px}
    .section-tag{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; background:var(--chip); border-radius:24px; font-size:12px; color:var(--brand-mid); border:1px solid #eaf4f0}
    .divider{height:1px; background:var(--line); margin:16px 0}
    .mono{font-variant-numeric:tabular-nums; font-feature-settings:"tnum" 1}

    /* Intro hero */
    #intro{display:block; position:relative; overflow:hidden}
    .intro-hero{
      position:relative;
      padding:24px; border-radius:14px;
      background:
        radial-gradient(1200px 600px at 0% 0%, rgba(13,59,46,.06), transparent 60%),
        radial-gradient(1200px 600px at 100% 0%, rgba(34,194,138,.10), transparent 60%),
        linear-gradient(180deg, #f9fffc, #ffffff 40%, #ffffff);
      border:1px solid var(--line);
    }
    .intro-header{display:flex; align-items:flex-start; gap:14px}
    .intro-badge{font-size:12px; padding:6px 10px; border-radius:999px; color:#083524; background:#ccf2e4; border:1px solid #b9eddc; white-space:nowrap}
    .intro h1{font-size:26px; margin:6px 0 10px; color:var(--brand-mid); letter-spacing:.2px}
    .intro p{margin:10px 0; line-height:1.6}
    .intro-grid{display:grid; gap:14px; margin-top:12px}
    @media (min-width:840px){ .intro-grid{grid-template-columns:1.2fr .8fr} }

    /* Icon bullets & pillar chips */
    .icon-list{margin:8px 0 4px; padding-left:0; list-style:none; display:grid; gap:6px}
    .icon-li{display:flex; align-items:flex-start; gap:10px}
    .icon{flex:0 0 auto; width:18px; height:18px; border-radius:6px; display:inline-grid; place-items:center; border:1px solid #b9eddc; background:#dff8ee}
    .pillars{display:grid; gap:8px; margin-top:8px}
    .pillar{display:flex; align-items:center; gap:8px; padding:8px 10px; border:1px solid var(--line); border-radius:12px; background:#fff}
    .pillar .dot{width:8px; height:8px; border-radius:999px; background:var(--brand-light); box-shadow:0 0 0 4px var(--glow)}

    /* Two-column Q/A layout */
    .grid{display:grid; gap:16px}
    .grid.cols{grid-template-columns:1.2fr 1.8fr}
    #layout.results-only{grid-template-columns:1fr; max-width:780px; margin-inline:auto}
    #questions, #results{display:none}

    /* Question blocks */
    details.block{border:1px solid var(--line); border-radius:14px; overflow:hidden; background:#fff}
    details.block + details.block{margin-top:10px}
    summary{list-style:none; cursor:pointer; user-select:none; padding:14px 16px; display:flex; align-items:center; gap:10px; font-weight:700; background:#f7fbf9; color:#426159}
    summary::marker{display:none}
    .qs{padding:10px 16px 14px}
    .q-row{display:grid; grid-template-columns:1fr; gap:10px; padding:12px 0; border-bottom:1px solid var(--line)}
    .q-row:last-child{border-bottom:0}
    .q-label{font-size:14px; color:var(--ink)}
    .choices{display:grid; grid-template-columns:repeat(5, minmax(120px, 1fr)); gap:8px; margin-top:6px}
    .chip-choice{position:relative; display:flex; align-items:center; justify-content:center; gap:8px; padding:10px 10px; border:1px solid var(--line); border-radius:12px; background:#fff; font-size:13px; color:#2b3a33; transition:border-color .15s, box-shadow .15s, background .15s; text-align:center}
    .chip-choice input{position:absolute; inset:0; opacity:0; cursor:pointer}
    .chip-choice:has(input:checked){border-color:#10a772; box-shadow:0 0 0 3px rgba(16,167,114,.18); background:#f4fff9}

    /* Buttons */
    .actions{display:flex; flex-wrap:wrap; gap:10px; margin-top:12px}
    .btn{appearance:none; border:0; border-radius:12px; padding:12px 16px; font-weight:800; cursor:pointer; display:inline-flex; align-items:center; gap:10px; letter-spacing:.2px}
    .btn-primary{background:linear-gradient(180deg,var(--brand-light),#10a772); color:#083524; border:1px solid #10a772; box-shadow:0 6px 20px rgba(16,167,114,.25)}
    .btn-ghost{background:#fff; color:var(--brand-mid); border:1px solid var(--line)}

    /* KPIs & Result banner */
    .kpis{display:grid; gap:12px; margin-top:4px}
    @media (min-width:720px){ .kpis{grid-template-columns:repeat(4,1fr)} }
    .kpi{border:1px solid var(--line); border-radius:14px; padding:14px; background:#fff}
    .kpi .label{font-size:12px; color:var(--muted)}
    .kpi .value{font-weight:800; font-size:20px; color:var(--ink)}
    .kpi.primary{border-color:#cef3e3; background:linear-gradient(180deg,#f7fffb,#ffffff)}
    .kpi.primary .value{color:var(--brand-mid)}

    .banner{border:1px solid var(--line); border-radius:14px; padding:16px; background:#fff; display:flex; gap:12px; align-items:flex-start}
    .badge{font-size:12px; padding:6px 10px; border-radius:999px; color:#083524; background:#ccf2e4; border:1px solid #b9eddc}
    .banner.low{border-color:#ffe5c0; background:#fff9f0}
    .banner.low .badge{background:#ffe5c0; border-color:#ffd79c; color:#5a3d0a}
    .banner.mid{border-color:#cce7e6; background:#f2fbfb}
    .banner.mid .badge{background:#d9f4f3; border-color:#c2ecea; color:#0e6b66}
    .banner.high{border-color:#cfeedd; background:#f6fffa}
    .banner.high .badge{background:#cfeedd; border-color:#b8e7ce; color:#115e38}

    /* Table */
    table{width:100%; border-collapse:separate; border-spacing:0; font-size:14px; border:1px solid var(--line); border-radius:14px; overflow:hidden}
    th,td{padding:10px 12px; border-bottom:1px solid var(--line)}
    thead th{background:#f7fbf9; text-align:left; color:#426159; font-weight:700}
    tbody tr:last-child td{border-bottom:0}
    td.right{text-align:right}

    /* Footer */
    .site-footer{
      position:fixed; bottom:0; left:0; right:0; background:#fff; border-top:1px solid var(--line);
      display:flex; align-items:center; justify-content:space-between; gap:16px; padding:12px 20px; z-index:1000;
      box-shadow:0 -8px 24px rgba(13,59,46,.05);
    }
    .footer-left{display:flex; align-items:center; gap:10px}
    .footer-left img{height:20px; width:auto}
    .footer-links{display:flex; gap:20px}
    .footer-links a{color:var(--brand-mid); font-weight:600; text-decoration:none}
    .footer-links a:hover{text-decoration:underline}

    @media print{
      .actions{display:none !important}
      .card, table{box-shadow:none}
      .wrap{margin:0; padding:0}
      header.brand{margin-bottom:8px}
      .kpi .value{font-size:18px}
    }
   /* ===== PDF report styling (used in hidden #printReport) ===== */
.print-wrap{
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  color:#0b0b0b; font-size:12.5px; line-height:1.45;
  padding:0;               /* was 16px — remove inner padding */
  margin:0;                /* ensure no outer margins */
  width:100%; display:block;
}

/* remove any accidental top margin on the first block */
.print-wrap > *:first-child{ margin-top:0 !important; }


.print-header{
  display:flex; align-items:center; justify-content:space-between; gap:14px;
  padding:0 0 10px; border-bottom:1px solid #e6eaee; margin-bottom:12px;
}
.print-brand{display:flex; align-items:center; gap:10px}
.print-brand img{height:28px; width:auto}
.print-title{font-weight:800; color:#0e6f57}
.print-meta{color:#5e6b74; font-size:12px}
.print-section{margin:12px 0}
.print-h2{font-weight:800; color:#0e6f57; margin:6px 0}
.print-kpis{display:grid; gap:8px; grid-template-columns:repeat(3,1fr)}
.print-kpi{border:1px solid #e6eaee; border-radius:10px; padding:10px; background:#fff}
.print-kpi .label{font-size:11px; color:#5e6b74}
.print-kpi .value{font-size:18px; font-weight:800}
.print-banner.low{border:1px solid #ffd79c; background:#fff9f0; border-radius:10px; padding:10px}
.print-banner.mid{border:1px solid #c2ecea; background:#f2fbfb; border-radius:10px; padding:10px}
.print-banner.high{border:1px solid #b8e7ce; background:#f6fffa; border-radius:10px; padding:10px}
.print-table{width:100%; border-collapse:separate; border-spacing:0; border:1px solid #e6eaee; border-radius:10px; overflow:hidden; font-size:12px}
.print-table th, .print-table td{padding:8px 10px; border-bottom:1px solid #e6eaee; text-align:left}
.print-table thead th{background:#f0faf7; color:#426159; font-weight:800}
.print-qa{margin:8px 0 0; display:grid; gap:8px}
.print-q{font-weight:600}
.print-a{margin:2px 0 0}

  </style>
</head>
<body>
  <div class="wrap" id="pageRoot">
    <header class="brand" aria-label="Just Smart Business">
      <div class="brand-left">
        <img src="jsb_icon.svg" alt="Just Smart Business" class="brand-logo" />
        <div>
          <div class="brand-title">Resiliency Assessment</div>
          <div class="subtle">Assess & Improve Business Resilience</div>
        </div>
      </div>
    </header>

    <!-- INTRO -->
    <section class="card intro" id="intro" aria-labelledby="introTitle">
      <div class="card-title">
        <span class="section-tag" id="introTitle">Introduction</span>
        <span class="subtle">Why business resilience matters</span>
      </div>

      <div class="intro-hero">
        <div class="intro-header">
          
          <h1>Build a stronger, safer, more sustainable business</h1>
        </div>

        <div class="intro-grid">
          <div>
            <p>Running a business is not only about today’s results—it is about being prepared for tomorrow’s uncertainties. From cashflow pressures to supply interruptions or technology failures, unexpected events can arise suddenly—and without planning, they can put your business at risk</p>
            <p>Business resilience is the ability to withstand shocks, adapt quickly, and continue moving forward. By assessing your current level of resilience, you can:</p>
            <ul class="icon-list">
              <li class="icon-li">
                <span class="icon" aria-hidden="true">
                  <!-- check icon -->
                  <svg width="14" height="14" viewBox="0 0 20 20" fill="none" aria-hidden="true"><path d="M4 10l4 4 8-8" stroke="#0e6f57" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </span>
                <span>Identify vulnerabilities before they become serious problems</span>
              </li>
              <li class="icon-li">
                <span class="icon" aria-hidden="true"><svg width="14" height="14" viewBox="0 0 20 20" fill="none"><path d="M4 10l4 4 8-8" stroke="#0e6f57" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
                <span>Strengthen the core systems that support your business</span>
              </li>
              <li class="icon-li">
                <span class="icon" aria-hidden="true"><svg width="14" height="14" viewBox="0 0 20 20" fill="none"><path d="M4 10l4 4 8-8" stroke="#0e6f57" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
                <span>Build confidence in your ability to handle disruption and change</span>
              </li>
            </ul>

            <p>This assessment will guide you through five critical areas of resilience:</p>
            <div class="pillars">
              <div class="pillar"><span class="" aria-hidden="true"></span><strong>Planning & Preparedness</strong></div>
              <div class="pillar"><span class="" aria-hidden="true"></span><strong>Financial Resilience</strong></div>
              <div class="pillar"><span class="" aria-hidden="true"></span><strong>Risk Management</strong></div>
              <div class="pillar"><span class="" aria-hidden="true"></span><strong>IT & Communications</strong></div>
              <div class="pillar"><span class="" aria-hidden="true"></span><strong>Business Growth & Adaptability</strong></div>
            </div>

            <p style="margin-top:10px">This calculator provides a clear, evidence-based picture of where your business stands today—so you know exactly what requires attention to make your business stronger, safer, and more sustainable.</p>

            <div class="actions" style="margin-top:14px">
              <button class="btn btn-primary" id="startBtn" type="button">Start my assessment</button>
            </div>
          </div>

          <!-- Decorative / brand block -->
          
        </div>
      </div>
    </section>

    <!-- Q/A + RESULTS LAYOUT -->
    <div class="grid cols" id="layout" role="region" aria-label="Questionnaire and Results">
      <!-- QUESTIONS -->
      <section class="card" id="questions" aria-labelledby="answersTitle">
        <div class="card-title">
          <span class="section-tag" id="answersTitle">Your Answers</span>
          <span class="subtle">Choose one option per question</span>
        </div>

        <!-- 1) Planning & Preparedness -->
        <details class="block" open>
          <summary>Planning & Preparedness</summary>
          <div class="qs">
            <div class="q-row">
              <div class="q-label">You have a written crisis or continuity plan that outlines how your business will respond to major disruptions (e.g. fire, flood, burglary).</div>
              <div class="choices" data-name="q-1-1" role="radiogroup" aria-label="Written crisis plan">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-1-1" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-1-1" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-1-1" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-1-1" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-1-1" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">You have identified and documented the critical resources (staff, equipment, suppliers, systems) required to keep your business operating in a crisis.</div>
              <div class="choices" data-name="q-1-2" role="radiogroup" aria-label="Critical resources documented">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-1-2" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-1-2" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-1-2" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-1-2" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-1-2" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">Your team is multi skilled so key functions can continue even if staff are unavailable.</div>
              <div class="choices" data-name="q-1-3" role="radiogroup" aria-label="Multi-skilled team">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-1-3" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-1-3" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-1-3" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-1-3" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-1-3" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">You have identified alternative suppliers and/or customer strategies in case a key supplier or customer is unable to trade.</div>
              <div class="choices" data-name="q-1-4" role="radiogroup" aria-label="Alternatives for key relationships">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-1-4" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-1-4" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-1-4" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-1-4" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-1-4" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">You regularly review and update your preparedness plan to ensure it remains relevant.</div>
              <div class="choices" data-name="q-1-5" role="radiogroup" aria-label="Plan reviewed">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-1-5" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-1-5" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-1-5" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-1-5" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-1-5" value="5"></label>
              </div>
            </div>
          </div>
        </details>

        <!-- 2) Financial Resilience -->
        <details class="block">
          <summary>Financial Resilience</summary>
          <div class="qs">
            <div class="q-row">
              <div class="q-label">You know the minimum level of cash reserves required to keep your business operating during a crisis.</div>
              <div class="choices" data-name="q-2-1" role="radiogroup" aria-label="Minimum cash known">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-2-1" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-2-1" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-2-1" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-2-1" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-2-1" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">You have reliable systems for invoicing, debtor management, and cash collection to maintain positive cash flow.</div>
              <div class="choices" data-name="q-2-2" role="radiogroup" aria-label="Efficient invoicing">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-2-2" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-2-2" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-2-2" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-2-2" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-2-2" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">Your financial forecasts include allowances for seasonal fluctuations and crisis scenarios.</div>
              <div class="choices" data-name="q-2-3" role="radiogroup" aria-label="Forecasts account for seasonality/crisis">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-2-3" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-2-3" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-2-3" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-2-3" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-2-3" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">You have sufficient cash reserves or access to finance to sustain your business if income is disrupted.</div>
              <div class="choices" data-name="q-2-4" role="radiogroup" aria-label="Cash buffer or access to finance">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-2-4" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-2-4" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-2-4" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-2-4" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-2-4" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">You review financial performance regularly and adjust forecasts when conditions change.</div>
              <div class="choices" data-name="q-2-5" role="radiogroup" aria-label="Review & adjust forecasts">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-2-5" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-2-5" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-2-5" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-2-5" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-2-5" value="5"></label>
              </div>
            </div>
          </div>
        </details>

        <!-- 3) Risk Assessment & Management -->
        <details class="block">
          <summary>Risk Assessment & Management</summary>
          <div class="qs">
            <div class="q-row">
              <div class="q-label">You have identified the key risks (internal, external, natural, and man-made) that could impact your business.</div>
              <div class="choices" data-name="q-3-1" role="radiogroup" aria-label="Key risks identified">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-3-1" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-3-1" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-3-1" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-3-1" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-3-1" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">You have documented a risk management plan that outlines how each risk will be addressed.</div>
              <div class="choices" data-name="q-3-2" role="radiogroup" aria-label="Risk plan documented">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-3-2" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-3-2" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-3-2" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-3-2" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-3-2" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">You have allocated funds or resources to manage your most significant risks.</div>
              <div class="choices" data-name="q-3-3" role="radiogroup" aria-label="Resources allocated">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-3-3" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-3-3" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-3-3" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-3-3" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-3-3" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">You have appropriate insurance in place to cover risks beyond your control.</div>
              <div class="choices" data-name="q-3-4" role="radiogroup" aria-label="Insurance in place">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-3-4" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-3-4" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-3-4" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-3-4" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-3-4" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">You review and update your risk assessments at least annually or after significant changes.</div>
              <div class="choices" data-name="q-3-5" role="radiogroup" aria-label="Risk assessments reviewed">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-3-5" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-3-5" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-3-5" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-3-5" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-3-5" value="5"></label>
              </div>
            </div>
          </div>
        </details>

        <!-- 4) IT & Communications -->
        <details class="block">
          <summary>IT & Communications</summary>
          <div class="qs">
            <div class="q-row">
              <div class="q-label">You have up-to-date virus protection and security patches installed on all IT devices.</div>
              <div class="choices" data-name="q-4-1" role="radiogroup" aria-label="Virus protection up to date">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-4-1" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-4-1" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-4-1" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-4-1" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-4-1" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">You have conducted an IT security review and implemented the recommended improvements.</div>
              <div class="choices" data-name="q-4-2" role="radiogroup" aria-label="IT security checks done">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-4-2" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-4-2" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-4-2" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-4-2" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-4-2" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">You regularly back up critical data and store copies off-site or in the cloud.</div>
              <div class="choices" data-name="q-4-3" role="radiogroup" aria-label="Regular backups">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-4-3" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-4-3" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-4-3" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-4-3" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-4-3" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">You have systems in place to continue business operations if electronic systems are unavailable (e.g. paper-based or alternative processes).</div>
              <div class="choices" data-name="q-4-4" role="radiogroup" aria-label="Operate without systems temporarily">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-4-4" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-4-4" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-4-4" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-4-4" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-4-4" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">Your team knows the communication protocols to follow during a system failure or crisis.</div>
              <div class="choices" data-name="q-4-5" role="radiogroup" aria-label="Comms protocols known">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-4-5" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-4-5" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-4-5" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-4-5" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-4-5" value="5"></label>
              </div>
            </div>
          </div>
        </details>

        <!-- 5) Business Growth & Adaptability -->
        <details class="block">
          <summary>Business Growth & Adaptability</summary>
          <div class="qs">
            <div class="q-row">
              <div class="q-label">You have identified potential challenges to growth (e.g. margins, sales volumes, competition) and developed strategies to address them.</div>
              <div class="choices" data-name="q-5-1" role="radiogroup" aria-label="Growth risks mitigated">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-5-1" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-5-1" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-5-1" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-5-1" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-5-1" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">You regularly review and manage costs (fixed and variable) to improve efficiency and profitability.</div>
              <div class="choices" data-name="q-5-2" role="radiogroup" aria-label="Cost analysis & efficiency">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-5-2" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-5-2" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-5-2" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-5-2" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-5-2" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">You monitor market trends, customer preferences, and competitor activity, and adapt your business accordingly.</div>
              <div class="choices" data-name="q-5-3" role="radiogroup" aria-label="Monitor market & adapt">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-5-3" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-5-3" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-5-3" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-5-3" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-5-3" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">You have assessed whether you have the financial and human resources needed to support your growth plans.</div>
              <div class="choices" data-name="q-5-4" role="radiogroup" aria-label="Resources for growth">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-5-4" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-5-4" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-5-4" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-5-4" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-5-4" value="5"></label>
              </div>
            </div>
            <div class="q-row">
              <div class="q-label">Leadership and decision-making responsibilities are clear, with contingency planning for key roles.</div>
              <div class="choices" data-name="q-5-5" role="radiogroup" aria-label="Leadership clarity & contingencies">
                <label class="chip-choice">Strongly Disagree<input type="radio" name="q-5-5" value="1"></label>
                <label class="chip-choice">Disagree<input type="radio" name="q-5-5" value="2"></label>
                <label class="chip-choice">Neutral<input type="radio" name="q-5-5" value="3"></label>
                <label class="chip-choice">Agree<input type="radio" name="q-5-5" value="4"></label>
                <label class="chip-choice">Strongly Agree<input type="radio" name="q-5-5" value="5"></label>
              </div>
            </div>
          </div>
        </details>

        <div class="actions">
          <button class="btn btn-primary" id="calcBtn" type="button">Calculate</button>
          <button class="btn btn-ghost" id="resetBtnQ" type="button">Reset</button>
        </div>
      </section>

      <!-- RESULTS -->
      <section class="card" id="results" aria-labelledby="resultsTitle">
        <div class="card-title">
          <span class="section-tag" id="resultsTitle">Results</span>
          <span class="subtle">Calculated from your answers</span>
        </div>

        <div class="kpis">
          <div class="kpi primary">
            <div class="label">Overall Resiliency Score(%)</div>
            <div class="value mono" id="overallPct">—</div>
          </div>
          <div class="kpi">
            <div class="label">Strongest Area</div>
            <div class="value" id="strongest">—</div>
          </div>
          <div class="kpi">
            <div class="label">Biggest Gap</div>
            <div class="value" id="weakest">—</div>
          </div>
        </div>

        <div class="divider"></div>

        <div class="banner" id="resultBanner">
          <span class="badge">Status</span>
          <div id="resultText">—</div>
        </div>

        <div class="divider"></div>

        <table aria-label="Section breakdown">
          <thead>
            <tr>
              <th>Section</th>
              <th>%</th>
            </tr>
          </thead>
          <tbody id="breakdownBody"></tbody>
        </table>

        <div class="divider"></div>
        <!-- Hidden report root that we render into a PDF -->
<section id="printReport" aria-hidden="true" style="display:none"></section>

        <!-- YOUR NEXT STEP -->
        <section aria-labelledby="nextStepTitle" id="nextStep">
          <div class="card-title" style="margin-top:0">
            <span class="section-tag" id="nextStepTitle">Your Next Step</span>
            <span class="subtle">Turn insight into action</span>
          </div>
          <p>Well done on completing the assessment—this is the first step towards building a business that can thrive under pressure.</p>
          <p>Your results are just the beginning—now let’s put them to work. Book your no-cost Business Resilience & Strategy Review to explore what-if scenarios, strengthen your systems, and shape a clear path forward for your business.</p>
          <ul class="icon-list">
            <li class="icon-li"><span class="icon"><svg width="14" height="14" viewBox="0 0 20 20" fill="none"><path d="M4 10l4 4 8-8" stroke="#0e6f57" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span><span>Take a closer look at your results</span></li>
            <li class="icon-li"><span class="icon"><svg width="14" height="14" viewBox="0 0 20 20" fill="none"><path d="M4 10l4 4 8-8" stroke="#0e6f57" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span><span>Explore “what-if” scenarios tailored to your business</span></li>
            <li class="icon-li"><span class="icon"><svg width="14" height="14" viewBox="0 0 20 20" fill="none"><path d="M4 10l4 4 8-8" stroke="#0e6f57" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span><span>Identify practical, achievable steps you can start right away</span></li>
          </ul>
          <div class="actions" style="margin-top:12px">
            <a class="btn btn-primary" id="bookBtn" href="https://portal.justsmartbusiness.com.au/portal/dashboard/view/150100" target="_blank" rel="noopener">Book a 20-minute free call</a>
             <button class="btn btn-ghost" id="downloadBtn" type="button">Download PDF</button>
            <button class="btn btn-ghost" id="resetBtnR" type="button">Reset</button>
            <p class="subtle" style="margin-top:8px"><strong>Reminder:</strong> If you want to book an appointment, please <strong>download this PDF</strong> and <strong>upload it to your file</strong> in the portal.</p>
          </div>
        </section>
      </section>
    </div>

    <!-- FOOTER -->
    <footer class="site-footer">
      <div class="footer-left">
        <img src="jsb_icon.svg" alt="JSB icon" />
        <span class="subtle">© <span id="year"></span> Just Smart Business</span>
      </div>
      <div class="footer-links">
        <a href="https://justsmartbusiness.com.au" target="_blank" rel="noopener">Website</a>
        
      </div>
    </footer>
  </div>

<script src="https://cdn.jsdelivr.net/npm/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>
  <script>
    // Configs
    const BOOKING_URL = "https://portal.justsmartbusiness.com.au/portal/dashboard/view/150100";

    // Sections with dynamic question ids (5 per section)
    const sections = [
      { key:"Planning & Preparedness",    ids:["q-1-1","q-1-2","q-1-3","q-1-4","q-1-5"] },
      { key:"Financial Resilience",       ids:["q-2-1","q-2-2","q-2-3","q-2-4","q-2-5"] },
      { key:"Risk Assessment & Management", ids:["q-3-1","q-3-2","q-3-3","q-3-4","q-3-5"] },
      { key:"IT & Communications",        ids:["q-4-1","q-4-2","q-4-3","q-4-4","q-4-5"] },
      { key:"Business Growth & Adaptability", ids:["q-5-1","q-5-2","q-5-3","q-5-4","q-5-5"] },
    ];

    // Result texts by bands (from your copy doc)
    const bandTexts = [
      "Your current resilience score is low, but this is a valuable starting point. The good news is that there are many simple steps you can take to strengthen your business and reduce risk. With the right plan, you can quickly improve your ability to respond to challenges.",
      "You have some resilience strategies in place, but there are still significant gaps that could leave your business exposed. Many owners want certainty in uncertain times—and the best way to create it is by putting stronger systems and plans in place.",
      "You are well on the way to building a resilient business. Your systems are showing strength, but there are still a few areas that need attention. By tightening these, you’ll move from being somewhat prepared to fully confident in your ability to manage change.",
      "Congratulations—you’ve built a highly resilient business! You have strong foundations in place, and you’re well prepared to handle challenges. The next step is to keep strengthening and refining your systems to stay ahead."
    ];

    // Helpers
    const $ = (sel,scope=document)=>scope.querySelector(sel);
    const $$ = (sel,scope=document)=>Array.from(scope.querySelectorAll(sel));
    const sum = a => a.reduce((x,y)=>x+y,0);
    const cap80 = (x)=> Math.min(x, 80); // display cap per your preference
    const pct = (x, max) => Math.round((x/max)*100);

    function getValue(name){
      const el = document.querySelector(`input[name="${name}"]:checked`);
      return el ? parseInt(el.value,10) : 0;
    }

    function allAnswered(){
      const allIds = sections.flatMap(s=>s.ids);
      return allIds.every(id => !!getValue(id));
    }

    function start(){
      // Hide intro, show questions
      $("#intro").style.display = "none";
      $("#questions").style.display = "block";
      $("#results").style.display = "none";
      $("#layout").classList.remove("results-only");
      window.scrollTo({ top: $("#pageRoot").offsetTop, behavior:"smooth" });
    }

    function compute(){
      if(!allAnswered()){ alert("Please answer all questions before calculating."); return; }

      const secScores = sections.map(s=>{
        const values = s.ids.map(id=>getValue(id));
        return { key:s.key, raw: sum(values), max: s.ids.length*5 };
      });
      const overallRaw = sum(secScores.map(s=>s.raw));
      const overallMax = sum(secScores.map(s=>s.max));
      const overallPercent = pct(overallRaw, overallMax);   // true %
      const overallDisplay = cap80(overallPercent);         // display-capped

      // KPIs
      $("#overallPct").textContent = `${overallDisplay}%`;

      // Breakdown
      const tb = $("#breakdownBody");
      tb.innerHTML = "";
      secScores.forEach(s=>{
        const p = cap80(pct(s.raw, s.max));
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${s.key}</td><td class="right mono">${p}%</td>`;
        tb.appendChild(tr);
      });

      // Strongest / weakest (based on raw, not capped)
      const strongest = secScores.slice().sort((a,b)=> b.raw-a.raw)[0];
      const weakest   = secScores.slice().sort((a,b)=> a.raw-b.raw)[0];
      $("#strongest").textContent = strongest.key;
      $("#weakest").textContent   = weakest.key;

      // Band & text (use uncapped % for classification)
      const p = overallPercent;
      const banner  = $("#resultBanner");
      banner.classList.remove("low","mid","high");
      let idx = 0;
      if (p <= 20){ idx = 0; banner.classList.add("low"); }
      else if (p < 50){ idx = 1; banner.classList.add("mid"); }
      else if (p < 80){ idx = 2; banner.classList.add("mid"); }
      else { idx = 3; banner.classList.add("high"); }
      $("#resultText").textContent = bandTexts[idx];

      // Show results-only panel
      $("#layout").classList.add("results-only");
      $("#questions").style.display = "none";
      $("#results").style.display = "block";
      $("#bookBtn").setAttribute("href", BOOKING_URL);
      window.scrollTo({ top: $("#pageRoot").offsetTop, behavior: "smooth" });
    }

    function resetAll(toIntro=true){
      $$('input[type="radio"]').forEach(r=> r.checked = false);
      $("#layout").classList.remove("results-only");
      if (toIntro){
        $("#intro").style.display = "block";
        $("#questions").style.display = "none";
        $("#results").style.display = "none";
      } else {
        $("#intro").style.display = "none";
        $("#questions").style.display = "block";
        $("#results").style.display = "none";
      }
      window.scrollTo({top:0,behavior:"smooth"});
    }

    // Events
    document.addEventListener("click", (e)=>{
      if (e.target.id === "startBtn") start();
      if (e.target.id === "calcBtn") compute();
      if (e.target.id === "resetBtnR") resetAll(true);   // from results → intro
      if (e.target.id === "resetBtnQ") resetAll(false);  // from questions → keep on questions
    });

    document.getElementById("year").textContent = new Date().getFullYear();
    
// ── Helpers reused from earlier code ─────────────────────────
function getSelectedLabel(name){
  const input = document.querySelector(`input[name="${name}"]:checked`);
  if(!input) return null;
  const label = input.closest('label');
  return label ? label.textContent.trim() : null;
}
function collectAnswered(){
  const answered = [];
  sections.forEach(sec=>{
    sec.ids.forEach((id)=>{
      const group = document.querySelector(`.choices[data-name="${id}"]`);
      if(!group) return;
      const qLabel = group.previousElementSibling?.textContent?.trim() || "";
      const aText = getSelectedLabel(id);
      if(aText){ answered.push({ section: sec.key, question: qLabel, answer: aText }); }
    });
  });
  return answered;
}

// Build a clean HTML report for PDF (vector text, not an image)
function buildReportHTML(){
  const overall = document.getElementById("overallPct")?.textContent?.trim() || "—";
  const strongest = document.getElementById("strongest")?.textContent?.trim() || "—";
  const weakest = document.getElementById("weakest")?.textContent?.trim() || "—";
  const resultText = document.getElementById("resultText")?.textContent?.trim() || "";
  const bannerClass = document.getElementById("resultBanner")?.classList.contains('high') ? 'high'
                      : document.getElementById("resultBanner")?.classList.contains('mid') ? 'mid'
                      : 'low';

  // read breakdown rows
  const rows = Array.from(document.querySelectorAll("#breakdownBody tr")).map(tr=>{
    const tds = tr.querySelectorAll("td");
    return { section: tds[0]?.textContent?.trim() || "", pct: tds[1]?.textContent?.trim() || "" };
  });

  // answered only
  const qa = collectAnswered().reduce((acc, item)=>{
    acc[item.section] = acc[item.section] || [];
    acc[item.section].push(item);
    return acc;
  }, {});

  const today = new Date();
  const dateStr = today.toLocaleString(undefined, { year:'numeric', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit' });

  const breakdownHTML = `
    <table class="print-table" aria-label="Section breakdown">
      <thead><tr><th>Section</th><th>%</th></tr></thead>
      <tbody>
        ${rows.map(r=>`<tr><td>${r.section}</td><td>${r.pct}</td></tr>`).join("")}
      </tbody>
    </table>`;

  let qaHTML = "";
  Object.keys(qa).forEach(sec=>{
    qaHTML += `<div class="print-section"><div class="print-h2">${sec}</div><div class="print-qa">`;
    qa[sec].forEach(item=>{
      qaHTML += `
        <div>
          <div class="print-q">${item.question}</div>
          <div class="print-a">Answer: <strong>${item.answer}</strong></div>
        </div>`;
    });
    qaHTML += `</div></div>`;
  });

  return `
    <div class="print-wrap">
      <div class="print-header">
        <div class="print-brand">
          <img src="jsb_icon.svg" alt="JSB" />
          <div>
            <div class="print-title">JSB Resiliency Assessment Report</div>
            <div class="print-meta">Generated ${dateStr}</div>
          </div>
        </div>
        <div class="print-meta">justsmartbusiness.com.au</div>
      </div>

      <div class="print-section">
        <div class="print-h2">Summary</div>
        <div class="print-kpis">
          <div class="print-kpi"><div class="label">Overall Resiliency Score</div><div class="value">${overall}</div></div>
          <div class="print-kpi"><div class="label">Strongest Area</div><div class="value">${strongest}</div></div>
          <div class="print-kpi"><div class="label">Biggest Gap</div><div class="value">${weakest}</div></div>
        </div>
      </div>

      <div class="print-section">
        <div class="print-h2">Result Interpretation</div>
        <div class="print-banner ${bannerClass}">${resultText}</div>
      </div>

      <div class="print-section">
        <div class="print-h2">Section Breakdown</div>
        ${breakdownHTML}
      </div>

      <div class="print-section">
        <div class="print-h2">Your Answers (answered items only)</div>
        ${qaHTML || '<div class="print-meta">No answers selected.</div>'}
      </div>
    </div>
  `;
}

// Turn the report HTML into a **real PDF** (no print dialog)
async function downloadPDF_real(){
  if (typeof window.html2pdf === "undefined") {
  console.error("html2pdf failed to load");
  alert("PDF engine couldn’t load. Check your internet connection or content security policy.");
  return;
}

  // Require results first
  if(document.getElementById("results").style.display !== "block"){
    alert("Please calculate your results first.");
    return;
  }
  const container = document.getElementById("printReport");
  container.innerHTML = buildReportHTML();
  container.style.display = "block"; // must be in the DOM for html2pdf layout

  const filename = (() => {
    const d = new Date();
    const pad = n => String(n).padStart(2,"0");
    return `JSB_Resiliency_Assessment_${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}_${pad(d.getHours())}${pad(d.getMinutes())}.pdf`;
  })();

  // html2pdf options: A4 portrait, small margins, vector text
  const opt = {
  margin:       [6, 8, 16, 8], // [top, left, bottom, right] in mm
  filename,
  image:        { type: 'jpeg', quality: 0.98 },
  html2canvas:  { scale: 2, useCORS: true, backgroundColor: '#ffffff', scrollY: 0 },
  jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' },
  pagebreak:    { mode: ['css','legacy'] }
};


  try{
   await html2pdf()
  .set(opt)
  .from(container)
  .toPdf()
  .get('pdf')
  .then(pdf => { addBrandedFooters(pdf); })
  .save();

  } finally {
    // Clean up DOM
    container.style.display = "none";
    container.innerHTML = "";
  }
}

// Wire the button
document.addEventListener("click",(e)=>{
  if(e.target && e.target.id === "downloadBtn"){
    downloadPDF_real();
  }
});
function addBrandedFooters(pdf){
  const total = pdf.internal.getNumberOfPages();
  for(let i = 1; i <= total; i++){
    pdf.setPage(i);

    const pageWidth  = pdf.internal.pageSize.getWidth();
    const pageHeight = pdf.internal.pageSize.getHeight();

    // divider line above footer
    pdf.setDrawColor(230, 234, 238); // #e6eaee
    pdf.setLineWidth(0.2);
    pdf.line(8, pageHeight - 12, pageWidth - 8, pageHeight - 12);

    // footer text
    pdf.setFont('helvetica', 'normal');
    pdf.setFontSize(9);
    pdf.setTextColor(14, 111, 87); // JSB green
    const footer = `Just Smart Business  |  justsmartbusiness.com.au  |  Page ${i} of ${total}`;
    pdf.text(footer, 8, pageHeight - 6); // left-aligned
  }
}
</script>
</body>
</html>







